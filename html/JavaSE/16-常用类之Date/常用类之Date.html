<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <script src="/js/markdown.js"></script>
    <script src="/js/jquery.min.js"></script>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/content.css">
	<link rel="stylesheet" href="/css/prism.css">
	<title>常用类之Date</title>
</head>

<body>
    <textarea hidden id="content">
<!--Markdown从这里开始  -->
# 常用类之Date

## 一、Date

在JDK1.1之后，Date中的大部分方法被Calender和DateFormat类代替。使用Date类获取当前时间。

```java
import java.util.Date;

public class Demo01 {
	public static void main(String[] args) {
		Date date = new Date();
		System.out.println(date);		// print: Sat Aug 12 15:59:24 CST 2017
	}
}
```


在类Date所有可以接受或返回年、月、日期、小时、分钟和秒值的方法中，将使用下面的表示形式：

- 年份y由整数y-1900表示。
- 月份由从0至11的整数表示，0是一月、1是二月等等，因此11是十二月。
- 日期（一月中的某天）按通常方式由整数1至31表示。
- 小时由从0至23的整数表示。因此，从午夜到1 a.m.的时间是0点，从中午到1 p.m. 的时间是12点。
- 分钟按通常方式由0至59的整数表示。
- 秒由0至61的整数表示，值60和61只对闰秒发生，尽管那样，也只用在实际正确跟踪闰秒的Java实现中。于按当前引入闰秒的方式，两个闰秒在同一分钟内发生是极不可能的，但此规范遵循ISO C的日期和时间约定。

**1. 常用方法**

- toLocaleString()：以本地格式显示时间
- getTime()：返回自1970年1月1日00:00:00 GMT以来此Date对象表示的毫秒数
- getYear()：返回当前日期的年份-1900
- getMonth()：返回当前日期的月，从0开始计算
- getDate()：返回当前日期的日
- getHours()：返回当前时间的小时
- getMinutes()：返回当前时间的分钟
- getSeconds()：返回当前时间的秒

```java
import java.util.Date;

public class Demo02 {
	@SuppressWarnings("deprecation")
	public static void main(String[] args) {
		Date date = new Date();
		System.out.println(date.toLocaleString());
		System.out.println(date.getTime());
		System.out.println(date.getYear());
		System.out.println(date.getMonth());
		System.out.println(date.getDate());
		System.out.println(date.getHours());
		System.out.println(date.getMinutes());
		System.out.println(date.getSeconds());
	}
}
```

分析：上面的函数都在JDK1.1之前版本使用，后期版本会报过时警告。

## 二、Calender

Calendar类是一个抽象类，它为特定瞬间与一组诸如YEAR、MONTH、DAY_OF_MONTH、HOUR等日历字段之间的转换提供了一些方法，并为操作日历字段（例如获得下星期的日期）提供了一些方法。瞬间可用毫秒值来表示，它是距历元（GMT，即格林威治标准时间1970年1月1日的00:00:00.000，格里高利历）的偏移量。

**1. 常用字段**

- AM_PM：get和set的字段，指示HOUR是在中午之前还是在中午之后
- AM：指示从午夜到中午之前这段时间的AM_PM字段值
- PM：指示从中午到午夜之前这段时间的AM_PM字段值
- YEAR：get和set的字段，指示年份
- MONTH：get和set的字段，指示月份，从0开始
- JANUARY, FEBRUARY, MARCH, APRIL, MAY, JUNE, JULY, AUGUST, SEPTEMBER, OCTOBER, NOVEMBER, DECEMBER, UNDECIMBER：指示从一月到十二月份、阴历中十三月的MONTH字段值
- DATE：get和set的字段，指示一个月中的某天
- WEEK_OF_MONTH：get和set的字段，指示当前月中的星期数
- WEEK_OF_YEAR：get和set的字段，指示当前年中的星期数
- DAY_OF_WEEK：指示一个星期中的某天
- SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY：指示从星期日到星期六的DAY_OF_WEEK字段值
- DAY_OF_MONTH：get和set的字段，指示一个月中的某天
- DAY_OF_YEAR：get和set的字段，指示当前年中的天数
- DAY_OF_WEEK_IN_MONTH：get和set的字段，指示当前月中的第几个星期
- ZONE_OFFSET：get和set的字段，以毫秒为单位指示距GMT的大致偏移量

**2. 常用方法**

- add(int field,int amount)：根据日历的规则，为给定的日历字段添加或减去指定的时间量。
- get(int field)：返回给定日历字段的值。
- set(int field,int value)：将给定的日历字段设置为给定值。
- getInstance()：使用默认时区和语言环境获得一个日历。
- getTime()：返回一个表示此Calendar时间值（从历元至现在的毫秒偏移量）的Date对象。
- setTime(Date date)：使用给定的Date设置此Calendar的时间。
- getMinimum(int field)：返回此Calendar实例给定日历字段的最小值。
- getMaximum(int field)：返回此Calendar实例给定日历字段的最大值。
- getLeastMaximum(int field)：返回此Calendar实例给定日历字段的最低的最大值。
- after(Object when)：判断此Calendar表示的时间是否在指定Object表示的时间之后，返回判断结果。
- before(Object when)：判断此Calendar表示的时间是否在指定Object表示的时间之前，返回判断结果。


```java
import java.util.Calendar;

public class Demo03 {
	public static void main(String[] args) {
		Calendar calendar = Calendar.getInstance();
		System.out.println(calendar.getTime());								// print: Sun Aug 13 09:39:41 CST 2017
		System.out.println(calendar.get(Calendar.YEAR));					// print: 2017
		System.out.println(calendar.get(Calendar.MONTH) + 1);				// print: 8
		System.out.println(calendar.get(Calendar.DATE));					// print: 13
		System.out.println(calendar.get(Calendar.HOUR));					// print: 9
		System.out.println(calendar.get(Calendar.MINUTE));					// print: 39
		System.out.println(calendar.get(Calendar.SECOND));					// print: 41
		System.out.println(calendar.get(Calendar.DAY_OF_WEEK));				// print: 1
		System.out.println(calendar.getMinimum(Calendar.DAY_OF_MONTH));		// print: 1
		System.out.println(calendar.getMaximum(Calendar.DAY_OF_MONTH));		// print: 31
	}
}
```

注意：月份是从0开始计数的，星期是从1开始计数的。

## 三、DateFormat

DateFormat是日期/时间格式化子类的抽象类，它以与语言无关的方式格式化并解析日期或时间。日期/时间格式化子类（如SimpleDateFormat）允许进行格式化（也就是日期 -> 文本）、解析（文本-> 日期）和标准化。将日期表示为Date对象，或者表示为从GMT（格林尼治标准时间）1970年1月1日 00:00:00这一刻开始的毫秒数。

**1. SimpleDateFormat中的日期时间模式字母：**

![img01](0002.png)

**2. 常用方法**

- format(Date date)：将一个Date格式化为日期/时间字符串。
- parse(String source)：从给定字符串的开始解析文本，以生成一个日期。

```java
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class Demo04 {
	public static void main(String[] args) {
		// 先定义日期与字符串之间的转换格式
		DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
		// 字符串转换日期
		Date date = null;
		try {
			date = dateFormat.parse("2017-01-01 11:11:11");
		} catch (ParseException e) {
			e.printStackTrace();
		}
		System.out.println(date);					// print: Sun Jan 01 11:11:11 CST 2017
		// 日期转换为字符串
		Date date1 = new Date();
		String string = dateFormat.format(date1);
		System.out.println(string);					// print: 2017-08-13 09:55:59
	}
}
```

## 四、实现日历

根据输入的日期输出对应月份的日历。

```java
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Scanner;

public class Demo05 {
	public static void main(String[] args) {
		Scanner scanner = new Scanner(System.in);
		DateFormat format = new SimpleDateFormat("yyyy-MM-dd");
		Calendar calendar = Calendar.getInstance();

		System.out.print("Please input date(2017-07-07): ");
		String dateStr = scanner.nextLine();

		try {
			calendar.setTime(format.parse(dateStr));
		} catch (ParseException e) {
			e.printStackTrace();
		}

		int today = calendar.get(Calendar.DAY_OF_MONTH);
		int maxday = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);
		calendar.set(Calendar.DAY_OF_MONTH, 1);
		System.out.println("Su\tMo\tTu\tWe\tTh\tFr\tSa");
		for (int i = 1; i < calendar.get(Calendar.DAY_OF_WEEK); i++) {
			System.out.print("\t");
		}
		for (int i = 0; i < maxday; i++) {
			if (calendar.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY)
				System.out.println();
			if (calendar.get(Calendar.DAY_OF_MONTH) != today)
				System.out.print(calendar.get(Calendar.DAY_OF_MONTH) + "\t");
			else
				System.out.print(calendar.get(Calendar.DAY_OF_MONTH) + "*\t");
			calendar.add(Calendar.DAY_OF_MONTH, 1);
		}
		scanner.close();
	}
}

```

输出：

```
Please input date(2017-07-07): 2017-08-13
Su	Mo	Tu	We	Th	Fr	Sa
		1	2	3	4	5
6	7	8	9	10	11	12
13*	14	15	16	17	18	19
20	21	22	23	24	25	26
27	28	29	30	31
```
<!--Markdown从这里结束  -->
	</textarea>
    <div id="preview" class="container"></div>
    <script>
        $("#preview").html(marked($("#content").val()));
        $("table").addClass("table table-bordered table-striped");
    </script>
    <script src="/js/prism.js"></script>
</body>

</html>