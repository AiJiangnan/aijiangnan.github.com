<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <script src="../../../js/markdown.js"></script>
    <script src="../../../js/jquery.min.js"></script>

    <link rel="stylesheet" href="../../../css/content.css">

    <title>常用类之String</title>
</head>

<body>
    <textarea hidden id="content">
<!--Markdown从这里开始  -->
# 常用类之String

String类代表字符串。Java程序中的所有字符串字面值（如“abc”）都作为此类的实现。字符串是常量，它们的值在创建之后不能更改。而StringBuffer和StringBuilder支持可变的字符串。

## 一、String

### 1. 构造方法

|                   方法                   |                功能                 |
| :------------------------------------: | :-------------------------------: |
|               `String()`               |    初始化新创建的String对象，使其表示一个空字符序列    |
|         `String(byte[] bytes)`         |    通过默认字符集解码byte数组，构成新String对象    |
| `String(byte[] bytes,Charset charset)` |    通过指定字符集解码byte数组，构成新String对象    |
|     `String(StringBuffer buffer)`      | 将StringBuffer中当前的字符序列构成新String对象  |
|    `String(StringBuilder builder)`     | 将StringBuilder中当前的字符序列构成新String对象 |

```java
import java.io.UnsupportedEncodingException;

public class Demo01 {
	public static void main(String[] args) {
		byte[] str = { 'H', 'e', 'l', 'l', 'o', ' ', 'w', 'o', 'r', 'l', 'd', '!' };
		String str1 = new String(str);
		String str2 = null;
		try {
			str2 = new String(str, "utf-8");
		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		}
		System.out.println(str1);
		System.out.println(str2);
	}
}
```

### 2. 常用方法

- concat、replace、substring、toLowerCase、toUpperCase、trim

```java
public class Demo02 {
	public static void main(String[] args) {
		String str = "Hello world!";
		String str2 = " Java ";
		System.out.println(str.concat(str2));				// 连接
		System.out.println(str.replace("world", "Java"));	// 替换
		System.out.println(str.substring(6, 11));			// 截取
		System.out.println(str.toLowerCase());				// 小写
		System.out.println(str.toUpperCase());				// 大写
		System.out.println(str2.trim());					// 去白
	}
}
	// print:
	//	Hello world! Java
	//	Hello Java!
	//	world
	//	hello world!
	//	HELLO WORLD!
	//	Java
```

注意：上面的方法能创建并返回一个新的字符串。

- 查找功能的方法：endsWith、startsWith、indexOf、lastIndexOf

```java
public class Demo03 {
	public static void main(String[] args) {
		String str = "Hello world!";
		System.out.println(str.endsWith("rld!"));		// print: true
		System.out.println(str.startsWith("Hel"));		// print: true
		System.out.println(str.indexOf("o"));			// print: 4
		System.out.println(str.lastIndexOf("o"));		// print: 7
	}
}
```

- 比较功能的方法：equals、equalsIgnoreCase、compareTo

```java
public class Demo04 {
	public static void main(String[] args) {
		String str1 = "Hello world!";
		String str2 = "Hello World!";
		System.out.println(str1.equals(str2));				// print: false
		System.out.println(str1.equalsIgnoreCase(str2));	// print: true
		System.out.println(str1.compareTo(str2));			// print: 32
	}
}
```

分析：compareTo方法在后面还会仔细讲到。

- 其他方法：charAt、length、valueOf

```java
public class Demo05 {
	public static void main(String[] args) {
		String str = "Hello world!";
		System.out.println(str.charAt(0));			// print: H
		System.out.println(str.length());			// print: 12
		System.out.println(String.valueOf(12.12));	// print: 12.12
	}
}
```

注意：valueOf可以将基本类型数据转换为字符串。

## 二、StringBuffer和StringBuilder

- String：不可变字符序列
- StringBuffer：可变字符序列，并且线程安全，但是效率低
- StringBuilder：可变字符序列，线程不安全，但是效率高


常用方法：

```java
public class Demo06 {
	public static void main(String[] args) {
		StringBuffer str = new StringBuffer("Hello");
		StringBuffer str2 = new StringBuffer(" world!");
		System.out.println(str.append(str2));		// print: Hello world!
		System.out.println(str.delete(2, 5));		// print: He world!
		System.out.println(str.insert(2, "llo"));	// print: Hello world!
		System.out.println(str.reverse());			// print: !dlrow olleH
	}
}
```

分析：StringBuffer和StringBuilder可以对字符串进行更多的操作，详细方法可见API文档。
<!--Markdown从这里结束  -->
	</textarea>
    <div id="preview" class="container"></div>
    <script>
        $("#preview").html(marked($("#content").val()));
    </script>

</body>

</html>