<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <script src="../../../js/markdown.js"></script>
    <script src="../../../js/jquery.min.js"></script>

    <link rel="stylesheet" href="../../../css/content.css">
    <title>条件查询</title>
</head>

<body>
    <textarea hidden id="content">
<!--Markdown从这里开始  -->
# 条件查询

在SQL语句中，条件查询需要用到where子句，来用于指定查询的条件，以对查询的内容进行过滤、筛选。条件查询的知识点如下： ![0002](0002.png)

## 一、关系运算符

**1. 使用“=”来查询指定内容的信息**

```sql
-- 查询10部门员工的信息
SELECT * FROM emp WHERE deptno=10;
-- 查询姓名为KING员工的详细信息
SELECT * FROM emp WHERE ename='KING';
-- 查询1981年11月17号入职的员工的信息
SELECT * FROM emp WHERE hiredate='17-11月-81';
SELECT * FROM emp WHERE hiredate='22-01月-81';
SELECT * FROM emp WHERE hiredate='01-5月-1981';
```

根据上面的代码和查询的结果可知：

- 指定的内容可以为数值、字符串、日期等数据类型;
- 指定的内容为字符串时，需用单引号，并且大小写敏感;
- 指定的内容为日期时，需要用固定的格式，月份为个位时，前面不能加0。

**2. 使用“>, <, >=, <=, !=(<>)”来指定查询的范围**

```sql
-- 查询薪水大于等于3000的员工的信息
SELECT * FROM emp WHERE sal>=3000;
-- 查询部门编号不为10的部门的所有员工信息
SELECT * FROM emp WHERE deptno!=10;
SELECT * FROM emp WHERE deptno<>10;
```

注意：不等于可以是“!=”，或是“<>”，指定比较的值也需注意前面的情况。

## 二、逻辑运算符

**1. 使用AND和OR来进行条件的“与”和“或”**

```sql
-- 查询工资在1500到3000之间的员工信息，包含1500和3000
SELECT * FROM emp WHERE sal>=1500 AND sal<=3000;
-- 查询SMITH和KING的详细信息
SELECT * FROM emp WHERE ename='SMITH' OR ename='KING';
```

**2. 使用NOT来进行条件的相反查询**

```sql
-- 查询除了SMITH之外的所有员工信息
SELECT * FROM emp WHERE NOT ename='SMITH';
```

**3. 使用BETWEEN...AND...可以设置查询的区间范围**

```sql
-- 查询工资在1500到3000之间的员工信息，包含1500和3000
SELECT * FROM emp WHERE sal BETWEEN 1500 AND 3000;
```

注意：使用BETWEEN...AND...查询的范围是闭区间，也就是说包含边界值。

**4. 使用IN可以设置查询的集合**

```sql
-- 查询SMITH和KING的详细信息
SELECT * FROM emp WHERE ename IN ('SMITH','KING');
```

> 可以对SQL代码进行下面优化，想想为什么？
>
> - AND：把检索结果较少的条件放到后面
> - OR：把检索结果较多的条件放到后面
>
> 执行下面代码试着比较AND和OR的优先级。
>
> ```sql
> SELECT * FROM emp WHERE job='SALESMAN' OR job='CLERK' AND sal>=1280;
> select * from emp where (job='SALESMAN' or job='CLERK') and sal>=1280;
> ```

## 三、模糊查询

**使用LIKE关键字来进行模糊查询**

- %：表示任意个字符
- _：表示一个任意字符
- ESCAPE：定义转义字符

```sql
-- 查询姓名首字母为S的员工的信息
SELECT * FROM emp WHERE ename LIKE 'S%';
-- 查询姓名最后一个字母为T的员工的信息
SELECT * FROM emp WHERE ename LIKE '%T';
-- 查询姓名第二个字母为A的员工的信息
SELECT * FROM emp WHERE ename LIKE '_A%';
-- 查询姓名中带有字母A的员工的信息
SELECT * FROM emp WHERE ename LIKE '%A%';
-- 查询名字中带有下划线的员工的信息
SELECT * FROM emp WHERE ename LIKE '%\_%' ESCAPE '\';
```

## 四、空值查询

**可以使用IS NULL来查询空值**

```sql
-- 查询所有没有提成的员工的信息
SELECT * FROM emp WHERE comm IS NULL;
-- 查询所有有提成的员工的信息
SELECT * FROM emp WHERE comm IS NOT NULL;
SELECT * FROM emp WHERE NOT comm IS NULL;
```

由上面代码可知，NULL表示字段值为空，NOT不仅可以对NULL取反，也可以对整个WHERE后面的条件进行取反。
<!--Markdown从这里结束  -->
	</textarea>
    <div id="preview" class="container"></div>
    <script>
        $("#preview").html(marked($("#content").val()));
        $("table").addClass("table table-bordered table-striped");
    </script>

</body>

</html>