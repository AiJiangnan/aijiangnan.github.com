<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <script src="../../../js/markdown.js"></script>
    <script src="../../../js/jquery.min.js"></script>

    <link rel="stylesheet" href="../../../css/content.css">

    <title>新增、修改和删除</title>
</head>

<body>
    <textarea hidden id="content">
<!--Markdown从这里开始  -->
# 新增、修改和删除

数据库的新增、修改和删除操作属于DML操作，它们都会破坏原有数据，为了不破坏原有的数据，所以我们在进行这些操作前复制一张表格。

```sql
-- 数据库表的复制
CREATE TABLE temp AS (SELECT * FROM emp);
SELECT * FROM temp2;
```

如果只需复制表结构，可以使用下面语句，自己思考为什么？

```sql
-- 复制表结构
CREATE TABLE temp2 AS (SELECT * FROM emp WHERE 1=2);
```

DML操作存在事务管理，也就是进行DML操作后，必须提交事务才能写入数据库，也可进行回滚事务来撤消DML操作。

## 一、插入语句

使用insert into关键字来插入记录。

```sql
-- 插入一条记录
INSERT INTO temp2 (empno,ename,job,mgr,hiredate,sal,comm,deptno) VALUES (1234,'zhangwuji','教主',7369,SYSDATE,50000.50,NULL,10);
INSERT INTO temp2 (empno,ename,job,mgr,hiredate,sal,comm,deptno) VALUES (1234,'张无忌','教主',7369,SYSDATE,50000.50,NULL,10);

INSERT INTO temp2 (empno,ename,job) VALUES (1234,'zhangwuji','教主');
```

也可以将查询的结果一次性插入到一张表中。

```sql
INSERT INTO temp2 SELECT * FROM emp;
```

## 二、更新语句

使用update set关键字来进行更新操作。

```sql
-- 将10 部门员工的工资上调 20%
SELECT * FROM temp2;
UPDATE temp SET sal=sal*1.2 WHERE deptno=10;
UPDATE temp SET sal=sal*2;
```

注意：如果不指定WHERE条件，会对所有数据进行更新。

## 三、删除语句

使用关键字delete来删除表中的数据。

```sql
-- 删除操作
DELETE FROM temp2 WHERE empno=1234;
DELETE temp2 WHERE deptno=10;
-- 删除表中的所有数据
DELETE temp2;
-- 清空表中的数据, 效率高
TRUNCATE TABLE temp2;
```
<!--Markdown从这里结束  -->
	</textarea>
    <div id="preview" class="container"></div>
    <script>
        $("#preview").html(marked($("#content").val()));
        $("table").addClass("table table-bordered table-striped");
    </script>

</body>

</html>