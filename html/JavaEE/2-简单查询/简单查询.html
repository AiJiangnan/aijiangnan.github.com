<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <script src="/js/markdown.js"></script>
    <script src="/js/jquery.min.js"></script>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/content.css">
    <link rel="stylesheet" href="/css/prism.css">
    <title>简单查询</title>
</head>

<body>
    <textarea hidden id="content">
<!--Markdown从这里开始  -->
# 简单查询
---

## 一、数据库知识点

**数据库技能点**

 ![0002](0002.png)

**SQL语句知识点**

 ![0003](0003.png)

##二、scott用户的表信息

**emp员工表**

|      列名      |      类型      |  含义   |
| :----------: | :----------: | :---: |
|  **empno**   |  number(4)   | 员工的编号 |
|  **ename**   | varchar2(10) | 员工的姓名 |
|   **job**    | varchar2(9)  |  职位   |
|   **mgr**    |  number(4)   | 领导编号  |
| **hiredate** |     date     | 入职日期  |
|   **sal**    | number(7,2)  |  薪水   |
|   **comm**   | number(7,2)  |  提成   |
|  **deptno**  |  number(2)   | 部门编号  |

**dept部门表**

|     列名     |      类型      |  含义   |
| :--------: | :----------: | :---: |
| **deptno** |  number(2)   | 部门的编号 |
| **dname**  | varchar2(14) | 部门的名称 |
|  **loc**   | varchar2(13) | 部门所在地 |

**salgrade薪资等级表**

|    列名     |   类型   |   含义    |
| :-------: | :----: | :-----: |
| **grade** | number |  薪资等级   |
| **losal** | number | 该等级最低薪资 |
| **hisal** | number | 该等级最高薪资 |

**bonus奖金表**

|    列名     |      类型      |  含义   |
| :-------: | :----------: | :---: |
| **ename** | varchar2(10) | 员工的姓名 |
|  **job**  | varchar2(9)  | 员工的职位 |
|  **sal**  |    number    |  薪水   |
| **comm**  |    number    |  提成   |

## 三、简单查询语句

以后所有的练习都是在scott用户下进行的，我们可以操作前面列出的scott用户自带的表，来学习数据库操作。

**1. 查询表格中的所有信息**

```sql
-- 查询所有员工信息
SELECT * FROM emp;
-- 查询所有部门信息
SELECT * FROM dept;
```

**2. 查询表格中指定字段的信息**

```sql
-- 查询所有员工的编号，姓名和入职日期
SELECT empno,ename,hiredate FROM emp;
```

**3. 查询时字段可以进行算术运算**

```sql
-- 查询所有员工的姓名，职位，薪水和年薪
SELECT ename,job,sal,sal*12 FROM emp;
SELECT ename,job,sal,sal*12 AS salary FROM emp;
SELECT ename,job,sal,sal*12 salary FROM emp;
SELECT ename,job,sal,sal*12 "年薪" FROM emp;
SELECT ename,job,sal,sal*12 "salary" FROM emp;
```

在进行查询语句时，可以对字段进行加、减、乘、除等算术运算，根据上面的代码以及查询的结果可知：

- 计算后的查询字段可以用as关键字来取一个别名。
- 此时as关键字可以省略，一般我们都省略。
- 如果非要用中文或其它字符来命名，需要加双引号，别名大小写敏感，也可加上双引号。
- 绝对不能使用单引号。

**4. 查询时可以用||来连接字符串**

```sql
 -- 查询所有员工的姓名，职位和薪水，以如下方式显示
-- 姓名：xxx，职位：xxx，薪水：xxx
SELECT ename,job,sal FROM emp;
SELECT '姓名：'||ename||'，职位：'||job||'，薪水：'||sal FROM emp;
```

注意：Oracle中用单引号来表示字符串。

**5. 查询去除重复项**

```sql
-- 查询所有的职位信息
SELECT job FROM emp;
SELECT DISTINCT job FROM emp;
SELECT DISTINCT job,ename FROM emp;
```

我们查询职位信息时，不需要把所有员工的职位列举出来，只需把职位和种类列举，这时可以使用关键字distinct来消除重复行，distinct对后面所有字段起作用，如示例代码中第3行执行结果，只有job和ename同时一样时，才属于重复项。

**6. 对查询结果进行排序**

```sql
-- 查询所有员工的信息并以薪水升序排序
SELECT * FROM emp ORDER BY sal;
SELECT * FROM emp ORDER BY sal ASC;
-- 查询所有员工的信息并以薪水降序排序
SELECT * FROM emp ORDER BY sal DESC;
-- 以其他类型字段进行排序
SELECT * FROM emp ORDER BY hiredate;
SELECT * FROM emp ORDER BY ename;

-- 查询员工的姓名，入职日期和薪水，按照薪水进行降序排序
-- 如果薪水相同，则将老员工排在后面
SELECT ename,hiredate,sal FROM emp ORDER BY sal DESC,hiredate DESC;

-- 查询员工的姓名和年薪，按照年薪进行排序
SELECT ename,sal*12 salary FROM emp ORDER BY sal*12;
SELECT ename,sal*12 salary FROM emp ORDER BY salary;
```

我们使用关键字`order by`来进行排序，默认是进行升序排序。根据上面SQL语句可知：

- asc：表示升序排序，desc：表示降序排序。
- 支持日期、字符串等多种字段排序。
- 支持多字段排序，用逗号（英文）分隔。
- 支持使用字段别名排序。
<!--Markdown从这里结束  -->
	</textarea>
    <div id="preview" class="container"></div>
    <script>
        $("#preview").html(marked($("#content").val()));
        $("table").addClass("table table-bordered table-striped");
    </script>
    <script src="/js/prism.js"></script>
</body>

</html>